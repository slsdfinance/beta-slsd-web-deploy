(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{4754:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/farm",function(){return n(6207)}])},6207:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eu}});var i=n(1527),a=n(6353),s=n(9061);let d=[{inputs:[{internalType:"contract ISLSDToken",name:"_slsdToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"eslsdAmount",type:"uint256"}],name:"CancelRedeem",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Escrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"eslsdAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slsdAmount",type:"uint256"}],name:"FinalizeRedeem",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"eslsdAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slsdAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"durationInDays",type:"uint256"}],name:"Redeem",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"totalAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fees",type:"uint256"}],name:"RedeemFeesAccrued",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RedeemFeesWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"bool",name:"whitelisted",type:"bool"}],name:"UpdateWhitelistAddress",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"redeemIndex",type:"uint256"}],name:"cancelRedeem",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"escrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"redeemIndex",type:"uint256"}],name:"finalizeRedeem",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"durationInDays",type:"uint256"}],name:"getSLSDAmountByVestingDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"uint256",name:"redeemIndex",type:"uint256"}],name:"getUserRedeem",outputs:[{internalType:"uint256",name:"slsdAmount",type:"uint256"},{internalType:"uint256",name:"eslsdAmount",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"}],name:"getUserRedeemsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getWhitelistAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWhitelistAddressesLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isAddressWhitelisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxRedeemDurationInDays",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minRedeemDurationInDays",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"eslsdAmount",type:"uint256"},{internalType:"uint256",name:"vestingDurationInDays",type:"uint256"}],name:"redeem",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"redeemFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"redeemRatioDenominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"redeemRatios",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bool",name:"whitelisted",type:"bool"}],name:"setWhitelistAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"slsdToken",outputs:[{internalType:"contract ISLSDToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userRedeems",outputs:[{internalType:"uint256",name:"eslsdAmount",type:"uint256"},{internalType:"uint256",name:"slsdAmount",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"withdrawRedeemFees",outputs:[],stateMutability:"nonpayable",type:"function"}];var l=n(6266),u=n(9657),p=n(959),r=n(5276),o=n(6987),y=n(137);let m=[25,42,52,60,65,70,74,77,80,83,85,87,89,91,93,95,97,98,99,100],c=u.O$.from(0);var v=n(4257),x=n(4567),h=n(570),f=n(2822),b=n(2740),g=n(3398),w=n.n(g),_=n(396);let T=(0,v.zo)("div",{height:50,padding:"10px 20px",fontSize:16,display:"flex",alignItems:"center",background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(3px)","& input":{outline:"none",border:"none",flex:1,color:"White",fontSize:16,height:"100%",lineHeight:"30px",whiteSpace:"nowrap",background:"transparent"},"& .symbol":{lineHeight:"30px",padding:"0 10px"},"& .maxbtn":{cursor:"pointer",fontWeight:500,lineHeight:"18px",padding:"6px 10px",background:"White",color:"Black"}});function S(e){let{trigger:t,balance:n,eSLSD:s,account:d}=e,[r,o]=(0,p.useState)(""),[y,c]=(0,p.useState)(20),[v,b]=(0,p.useState)(!1),[g,S]=(0,p.useState)(!1),M=(0,l.Qt)(r),j=!d||!s||M.lte(0)||M.gt(n)||!y,k=async()=>{if(!j)try{S(!0);let e=await s.allowance(d,s.address);if(e.lt(M)){let e=await s.estimateGas.approve(s.address,x.Bz),t=await s.approve(s.address,x.Bz,{gasLimit:(0,l.MA)(e)});await t.wait()}let t=await s.estimateGas.redeem(M,u.O$.from(y)),n=await s.redeem(M,u.O$.from(y),{gasLimit:(0,l.MA)(t)});await n.wait(),b(!1)}catch(e){console.info("error:",e)}finally{S(!1)}};return(0,i.jsxs)(_.u,{trigger:t,title:"Vesting",open:v,onOpenChange:b,contentStyle:{display:"flex",flexDirection:"column",gap:20,background:"rgba(255,255,255, 0.2)",backdropFilter:"blur(10px)"},children:[(0,i.jsxs)("div",{children:["$eSLSD balance: ",(0,a.dq)(n)," $eSLSD"]}),(0,i.jsxs)(T,{children:[(0,i.jsx)("input",{value:r,onChange:e=>{o(e.target.value)}}),(0,i.jsx)("div",{className:"symbol",children:"$eSLSD"}),(0,i.jsx)("div",{className:"maxbtn",onClick:()=>{o(h.formatEther(n))},children:"Max"})]}),(0,i.jsxs)(T,{children:[(0,i.jsx)("input",{type:"number",value:y,onChange:e=>{let t=parseInt(e.target.value);t>=1&&t<=20?c(t):e.target.value||c("")}}),(0,i.jsx)("div",{className:"symbol",children:"days"}),(0,i.jsx)("div",{className:"maxbtn",onClick:()=>{c(20)},children:"Max"})]}),(0,i.jsxs)("div",{children:["Vesting ratio : ",y?m[y-1]:"-","%"," ",(0,i.jsx)(w(),{style:{color:"var(--colors-primary)"},href:"/rule",children:"Read the rule"})]}),(0,i.jsxs)("div",{children:["After Vesting, you will obtain ",y?(0,a.dq)(M.mul(m[y-1]).div(100)):"-"," ","$SLSD"]}),(0,i.jsx)(f.z,{loading:g,disabled:j,style:{width:"100%"},onClick:k,children:"Confirm"})]})}let M=(0,v.zo)("div",{height:50,padding:"10px 20px",fontSize:16,display:"flex",alignItems:"center",background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(3px)","& input":{outline:"none",border:"none",flex:1,color:"White",fontSize:16,height:"100%",lineHeight:"30px",whiteSpace:"nowrap",background:"transparent"},"& .symbol":{lineHeight:"30px",padding:"0 10px"},"& .maxbtn":{cursor:"pointer",fontWeight:500,lineHeight:"18px",padding:"6px 10px",background:"White",color:"Black"}}),j=(0,v.zo)("div",{display:"grid",gap:20,marginTop:32,gridTemplateColumns:"100%","@lg":{gridTemplateColumns:"1fr 1fr"}}),k=(0,v.zo)("div",{width:"100%",padding:20,border:"1px solid $primary",display:"flex",gap:20,maxWidth:"100%",flexDirection:"column","@lg":{"&:nth-child(3)":{gridColumnStart:1,gridColumnEnd:3}},"& .vest_title":{fontSize:22,fontWeight:600,lineHeight:"27px"},"& .btn_group":{display:"flex",gap:20,flexWrap:"wrap"}}),A=(0,v.zo)("div",{padding:20,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(3px)",display:"flex",justifyContent:"space-between",flex:1,fontSize:22,lineHeight:"20px","@lg":{padding:"20px 50px"},"& .title":{fontWeight:600,color:"#A090FF"},"& .value":{marginTop:10}}),N=(0,v.zo)("div",{display:"flex",flexDirection:"column",overflowX:"auto","& .vp_table":{minWidth:913},"& .vp_header":{fontSize:18,fontWeight:600,lineHeight:1.5,color:"#A091FF",display:"grid",gridTemplateColumns:"repeat(5, 1fr) 1.5fr",whiteSpace:"nowrap"},"& .vp_header_item":{padding:"11.5px 12px"},"& .vp_body_item":{fontSize:18,lineHeight:1.5,display:"grid",whiteSpace:"nowrap",gridTemplateColumns:"repeat(5, 1fr) 1.5fr","&:nth-child(2n+1)":{background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(3px)"}},"& .vp_body:nth-child(2n+1)":{},"& .vp_body_item_child":{padding:"11.5px 12px"}});function z(e){let{redeem:t,eSLSD:n}=e,[s,d]=(0,p.useState)(!1),[o,y]=(0,p.useState)(!1),[c,v,x]=(0,p.useMemo)(()=>{let e=t.slsdAmount.mul(1e4).div(t.eslsdAmount).toNumber()/100,n=m.findIndex(t=>.2>Math.abs(e-t));return n>=0?[m[n]/100,n+1,t.endTime.toNumber()-(n+1)*86400]:[1,20,t.endTime.toNumber()-1728e3]},[t]),[h,{startCountdown:b,stopCountdown:g}]=(0,r.au)({countStart:t.endTime.toNumber()-(0,l.cO)().unix(),countStop:0,intervalMs:1e3});(0,p.useEffect)(()=>(t.endTime.toNumber()-(0,l.cO)().unix()>0&&b(),g()),[]);let w=(0,p.useMemo)(()=>{if(h<=0)return"0mins";let e=Math.floor(h/60/60),t=Math.floor((h-3600*e)/60);return e>0?"".concat(e,"hrs ").concat(t,"mins"):"".concat(t,"mins")},[h]),_=async()=>{if(n)try{d(!0);let e=await n.estimateGas.cancelRedeem(u.O$.from(t.id)),i=await n.cancelRedeem(u.O$.from(t.id),{gasLimit:(0,l.MA)(e)});await i.wait()}catch(e){}finally{d(!1)}},T=async()=>{if(n)try{y(!0);let e=await n.estimateGas.finalizeRedeem(u.O$.from(t.id)),i=await n.finalizeRedeem(u.O$.from(t.id),{gasLimit:(0,l.MA)(e)});await i.wait()}catch(e){}finally{y(!1)}};return(0,i.jsxs)("div",{className:"vp_body_item",children:[(0,i.jsx)("div",{className:"vp_body_item_child",children:l.cO.unix(x).format("YYYY-MM-DD")}),(0,i.jsxs)("div",{className:"vp_body_item_child",children:[v,"days"]}),(0,i.jsx)("div",{className:"vp_body_item_child",children:w}),(0,i.jsx)("div",{className:"vp_body_item_child",children:c}),(0,i.jsxs)("div",{className:"vp_body_item_child",children:[(0,a.dq)(t.slsdAmount)," $SLSD"]}),(0,i.jsx)("div",{className:"vp_body_item_child",children:(0,i.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,i.jsx)(f.z,{loading:s,onClick:_,disabled:h<=0,style:{height:30,width:90},children:"Cancel"}),(0,i.jsx)(f.z,{loading:o,onClick:T,disabled:h>0,style:{height:30,width:90},children:"Claim"})]})})]})}function C(){let{address:e}=(0,o.mA)(),{redeems:t,balance:n,staked:m,earned:v,apr:g,eSLSD:w,vest:_,vestAllownce:T,doQuery:C}=function(){let{address:e}=(0,o.mA)(),t=function(){let{earnedToken:e}=(0,y.q)(),{data:t}=(0,o.mx)(),n=(0,o.yL)();return(0,o.cq)({address:e,abi:d,signerOrProvider:null!=t?t:n})}(),n=function(){let{vestPool:e}=(0,y.q)(),{data:t}=(0,o.mx)(),n=(0,o.yL)();return(0,o.cq)({address:e,abi:s.H,signerOrProvider:null!=t?t:n})}(),[i,a]=(0,p.useState)({redeems:[],balance:c,staked:c,rewardRate:c,earned:c,apr:"0.00",vestAllownce:c}),m=async()=>{try{if(!t||!e||!n)return;let i=async()=>{let n=(await t.getUserRedeemsLength(e)).toNumber(),i=[];for(let a=0;a<n;a++){let n=await t.getUserRedeem(e,u.O$.from(a));i.push({...n,id:a})}return i.reverse()},[s,d,p,r,o,y]=await Promise.all([i(),t.balanceOf(e),n.balanceOf(e),n.rewardRate(),n.earned(e),n.totalSupply()]),m=y.eq(0)||r.eq(0)?"0.00":(0,l.SS)(r.toString()).multipliedBy(31536e3).div((0,l.SS)(y.toString())).multipliedBy(100).toFixed(2),c=await t.allowance(e,n.address);a({redeems:s,balance:d,staked:p,rewardRate:r,earned:o,apr:m,vestAllownce:c})}catch(e){console.error(e)}};return(0,r.Yz)(m,5e3),(0,r.qR)(()=>{m()}),{...i,eSLSD:t,vest:n,doQuery:m}}(),[D,R]=(0,p.useState)(!1),[L,I]=(0,p.useState)(!1),[F,W]=(0,p.useState)(!1),[O,$]=(0,p.useState)(""),q=(0,l.Qt)(O),E=q.gt(T),Z=!e||!w||!_||q.lte(0)||D,H=!e||!_||q.lte(0)||q.gt(m)||F,B=!e||!_||v.lte(0)||F,V=async()=>{if(!Z)try{if(R(!0),E){let e=await w.estimateGas.approve(_.address,x.Bz),t=await w.approve(_.address,x.Bz,{gasLimit:(0,l.MA)(e)});await t.wait(),await C()}else{let e=await _.estimateGas.stake(q),t=await _.stake(q,{gasLimit:(0,l.MA)(e)});await t.wait(),await C()}}catch(e){}finally{R(!1)}},G=async()=>{if(!H)try{I(!0);let e=await _.estimateGas.withdraw(q),t=await _.withdraw(q,{gasLimit:(0,l.MA)(e)});await t.wait(),await C()}catch(e){}finally{I(!1)}},P=async()=>{if(!B)try{W(!0);let e=await _.estimateGas.getReward(),t=await _.getReward({gasLimit:(0,l.MA)(e)});await t.wait(),await C()}catch(e){}finally{W(!1)}};return(0,i.jsxs)("div",{style:{marginTop:60},children:[(0,i.jsx)(b.Dx,{children:"Vest"}),(0,i.jsxs)(j,{children:[(0,i.jsxs)(k,{children:[(0,i.jsx)("div",{className:"vest_title",children:"Convert $eSLSD to $SLSD"}),(0,i.jsxs)(A,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"title",children:"$eSLSD balance"}),(0,i.jsxs)("div",{className:"value",children:[(0,a.dq)(n.toString())," $eSLSD"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"title",children:"Staked $eSLSD"}),(0,i.jsxs)("div",{className:"value",children:[(0,a.dq)(m)," $eSLSD"]})]})]}),(0,i.jsx)(S,{account:e,eSLSD:w,balance:n,trigger:(0,i.jsx)(f.z,{style:{width:"100%"},children:"Vest"})})]}),(0,i.jsxs)(k,{children:[(0,i.jsx)("div",{className:"vest_title",children:"Stake $eSLSD to earn Dimond hand rewards"}),(0,i.jsxs)(A,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"title",children:"Earned"}),(0,i.jsxs)("div",{className:"value",children:[(0,a.dq)(v)," $eSLSD"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"title",children:"APR"}),(0,i.jsxs)("div",{className:"value",children:[g,"%"]})]})]}),(0,i.jsxs)(M,{children:[(0,i.jsx)("input",{value:O,onChange:e=>$(e.target.value)}),(0,i.jsx)("div",{className:"symbol",children:"$eSLSD"}),(0,i.jsx)("div",{className:"maxbtn",onClick:()=>$(h.formatEther(n)),children:"Max"})]}),(0,i.jsxs)("div",{className:"btn_group",children:[(0,i.jsx)(f.z,{onClick:V,loading:D,disabled:Z,style:{flex:1},children:E?"Approve":"Stake"}),(0,i.jsx)(f.z,{onClick:G,loading:L,disabled:H,style:{flex:1},children:"Withdraw"}),(0,i.jsx)(f.z,{onClick:P,loading:F,disabled:B,style:{flex:1},children:"Claim"})]})]}),(0,i.jsxs)(k,{children:[(0,i.jsx)("div",{className:"vest_title",children:"Vesting in progress"}),(0,i.jsx)(N,{children:(0,i.jsxs)("div",{className:"vp_table",children:[(0,i.jsxs)("div",{className:"vp_header",children:[(0,i.jsx)("div",{className:"vp_header_item",children:"Start from"}),(0,i.jsx)("div",{className:"vp_header_item",children:"Duration"}),(0,i.jsx)("div",{className:"vp_header_item",children:"Count down"}),(0,i.jsx)("div",{className:"vp_header_item",children:"Vest ratio"}),(0,i.jsx)("div",{className:"vp_header_item",children:"Final Amount"}),(0,i.jsx)("div",{className:"vp_header_item"})]}),(0,i.jsx)("div",{className:"vp_body",children:t.map((e,t)=>(0,i.jsx)(z,{redeem:e,eSLSD:w},"vp_"+t))})]})})]})]})]})}function D(e){return e.mul(120).div(100)}var R=n(2354),L=n(9865);let I=[{name:"TokenExchange",inputs:[{name:"buyer",type:"address",indexed:!0},{name:"sold_id",type:"int128",indexed:!1},{name:"tokens_sold",type:"uint256",indexed:!1},{name:"bought_id",type:"int128",indexed:!1},{name:"tokens_bought",type:"uint256",indexed:!1}],anonymous:!1,type:"event"},{name:"AddLiquidity",inputs:[{name:"provider",type:"address",indexed:!0},{name:"token_amounts",type:"uint256[4]",indexed:!1},{name:"fees",type:"uint256[4]",indexed:!1},{name:"invariant",type:"uint256",indexed:!1},{name:"token_supply",type:"uint256",indexed:!1}],anonymous:!1,type:"event"},{name:"RemoveLiquidity",inputs:[{name:"provider",type:"address",indexed:!0},{name:"token_amounts",type:"uint256[4]",indexed:!1},{name:"fees",type:"uint256[4]",indexed:!1},{name:"token_supply",type:"uint256",indexed:!1}],anonymous:!1,type:"event"},{name:"RemoveLiquidityOne",inputs:[{name:"provider",type:"address",indexed:!0},{name:"token_amount",type:"uint256",indexed:!1},{name:"coin_amount",type:"uint256",indexed:!1}],anonymous:!1,type:"event"},{name:"RemoveLiquidityImbalance",inputs:[{name:"provider",type:"address",indexed:!0},{name:"token_amounts",type:"uint256[4]",indexed:!1},{name:"fees",type:"uint256[4]",indexed:!1},{name:"invariant",type:"uint256",indexed:!1},{name:"token_supply",type:"uint256",indexed:!1}],anonymous:!1,type:"event"},{name:"CommitNewAdmin",inputs:[{name:"deadline",type:"uint256",indexed:!0},{name:"admin",type:"address",indexed:!0}],anonymous:!1,type:"event"},{name:"NewAdmin",inputs:[{name:"admin",type:"address",indexed:!0}],anonymous:!1,type:"event"},{name:"CommitNewFee",inputs:[{name:"deadline",type:"uint256",indexed:!0},{name:"fee",type:"uint256",indexed:!1},{name:"admin_fee",type:"uint256",indexed:!1}],anonymous:!1,type:"event"},{name:"NewFee",inputs:[{name:"fee",type:"uint256",indexed:!1},{name:"admin_fee",type:"uint256",indexed:!1}],anonymous:!1,type:"event"},{name:"RampA",inputs:[{name:"old_A",type:"uint256",indexed:!1},{name:"new_A",type:"uint256",indexed:!1},{name:"initial_time",type:"uint256",indexed:!1},{name:"future_time",type:"uint256",indexed:!1}],anonymous:!1,type:"event"},{name:"StopRampA",inputs:[{name:"A",type:"uint256",indexed:!1},{name:"t",type:"uint256",indexed:!1}],anonymous:!1,type:"event"},{stateMutability:"nonpayable",type:"constructor",inputs:[{name:"_owner",type:"address"},{name:"_coins",type:"address[4]"},{name:"_pool_token",type:"address"},{name:"_A",type:"uint256"},{name:"_fee",type:"uint256"},{name:"_admin_fee",type:"uint256"}],outputs:[]},{stateMutability:"view",type:"function",name:"A",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"A_precise",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"balances",inputs:[{name:"i",type:"uint256"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"get_virtual_price",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"calc_token_amount",inputs:[{name:"amounts",type:"uint256[4]"},{name:"is_deposit",type:"bool"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"payable",type:"function",name:"add_liquidity",inputs:[{name:"amounts",type:"uint256[4]"},{name:"min_mint_amount",type:"uint256"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"get_dy",inputs:[{name:"i",type:"int128"},{name:"j",type:"int128"},{name:"dx",type:"uint256"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"get_dx",inputs:[{name:"i",type:"int128"},{name:"j",type:"int128"},{name:"dy",type:"uint256"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"payable",type:"function",name:"exchange",inputs:[{name:"i",type:"int128"},{name:"j",type:"int128"},{name:"dx",type:"uint256"},{name:"min_dy",type:"uint256"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"nonpayable",type:"function",name:"remove_liquidity",inputs:[{name:"_amount",type:"uint256"},{name:"_min_amounts",type:"uint256[4]"}],outputs:[{name:"",type:"uint256[4]"}]},{stateMutability:"nonpayable",type:"function",name:"remove_liquidity_imbalance",inputs:[{name:"_amounts",type:"uint256[4]"},{name:"_max_burn_amount",type:"uint256"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"calc_withdraw_one_coin",inputs:[{name:"_token_amount",type:"uint256"},{name:"i",type:"int128"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"nonpayable",type:"function",name:"remove_liquidity_one_coin",inputs:[{name:"_token_amount",type:"uint256"},{name:"i",type:"int128"},{name:"_min_amount",type:"uint256"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"nonpayable",type:"function",name:"ramp_A",inputs:[{name:"_future_A",type:"uint256"},{name:"_future_time",type:"uint256"}],outputs:[]},{stateMutability:"nonpayable",type:"function",name:"stop_ramp_A",inputs:[],outputs:[],gas:154860},{stateMutability:"nonpayable",type:"function",name:"commit_new_fee",inputs:[{name:"new_fee",type:"uint256"},{name:"new_admin_fee",type:"uint256"}],outputs:[]},{stateMutability:"nonpayable",type:"function",name:"apply_new_fee",inputs:[],outputs:[],gas:160702},{stateMutability:"nonpayable",type:"function",name:"revert_new_parameters",inputs:[],outputs:[]},{stateMutability:"nonpayable",type:"function",name:"commit_transfer_ownership",inputs:[{name:"_owner",type:"address"}],outputs:[]},{stateMutability:"nonpayable",type:"function",name:"apply_transfer_ownership",inputs:[],outputs:[]},{stateMutability:"nonpayable",type:"function",name:"revert_transfer_ownership",inputs:[],outputs:[]},{stateMutability:"nonpayable",type:"function",name:"withdraw_admin_fees",inputs:[],outputs:[]},{stateMutability:"nonpayable",type:"function",name:"donate_admin_fees",inputs:[],outputs:[],gas:140458},{stateMutability:"nonpayable",type:"function",name:"kill_me",inputs:[],outputs:[],gas:40325},{stateMutability:"nonpayable",type:"function",name:"unkill_me",inputs:[],outputs:[],gas:23162},{stateMutability:"view",type:"function",name:"coins",inputs:[{name:"arg0",type:"uint256"}],outputs:[{name:"",type:"address"}]},{stateMutability:"view",type:"function",name:"admin_balances",inputs:[{name:"arg0",type:"uint256"}],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"fee",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"admin_fee",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address"}]},{stateMutability:"view",type:"function",name:"lp_token",inputs:[],outputs:[{name:"",type:"address"}]},{stateMutability:"view",type:"function",name:"initial_A",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"future_A",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"initial_A_time",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"future_A_time",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"admin_actions_deadline",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"transfer_ownership_deadline",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"future_fee",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"future_admin_fee",inputs:[],outputs:[{name:"",type:"uint256"}]},{stateMutability:"view",type:"function",name:"future_owner",inputs:[],outputs:[{name:"",type:"address"}]}],F=[{inputs:[{internalType:"contract RocketStorageInterface",name:"_rocketStorageAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"time",type:"uint256"}],name:"EtherDeposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"ethAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"time",type:"uint256"}],name:"TokensBurned",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"ethAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"time",type:"uint256"}],name:"TokensMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_rethAmount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositExcess",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"depositExcessCollateral",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getCollateralRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_rethAmount",type:"uint256"}],name:"getEthValue",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getExchangeRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_ethAmount",type:"uint256"}],name:"getRethValue",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalCollateral",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_ethAmount",type:"uint256"},{internalType:"address",name:"_to",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],W=()=>{let e={address:L.mp[(0,L.ZA)()],abi:I,chainId:(0,L.ZA)()},{data:t}=(0,o.Dm)({contracts:[...L.wc.map((t,n)=>({...e,functionName:"balances",args:[n]}))],watch:!0,cacheOnBlock:!1});return{balances:t}};var O=n(1232),$=n(4637),q=n.n($),E=n(8957),Z=n.n(E);q().extend(Z());let H=()=>{var e;let{data:t}=(0,o.Ov)({chainId:(0,L.ZA)()}),{data:n}=(0,o.Dm)({contracts:[{address:L.mp[(0,L.ZA)()],abi:I,functionName:"get_virtual_price",chainId:(0,L.ZA)()},{address:L.wc[3].address[(0,L.ZA)()],abi:F,functionName:"getExchangeRate",chainId:(0,L.ZA)()}]}),i=null==n?void 0:null===(e=n[1])||void 0===e?void 0:e.toString(),{balances:a}=W(),{data:s}=(0,o.do)({address:L.vQ[(0,L.ZA)()],abi:R.em,functionName:"totalSupply",chainId:(0,L.ZA)()}),d=q()().unix(),l=q()().utc().startOf("day").unix(),u=(0,p.useMemo)(()=>{if(t)return t-Number(new O.Z((d-l)/12).toFixed(0))},[t]),r=(0,p.useMemo)(()=>{if(u)return u-7200},[u]),{data:y}=(0,o.do)({address:L.mp[(0,L.ZA)()],abi:I,functionName:"get_virtual_price",chainId:(0,L.ZA)(),enabled:!!r&&r>0,overrides:{blockTag:r}}),m=y||h.parseEther("1"),{data:c}=(0,o.do)({address:L.mp[(0,L.ZA)()],abi:I,functionName:"get_virtual_price",chainId:(0,L.ZA)(),enabled:!!u&&u>0,overrides:{blockTag:u}}),v=c||h.parseEther("1"),x=(0,p.useMemo)(()=>{if(a&&s){let e=a.reduce((e,t,n)=>{let a="rETH"===L.wc[n].symbol?new O.Z(i||"1").div(1e18).toFixed():"1";return e.plus(new O.Z(t?t.toString():"0").multipliedBy(null!=a?a:"1"))},new O.Z(0));return e.div(s.toString()).multipliedBy(1e18).toFixed()}return new O.Z(1e18).toFixed()},[s,a]),f=(0,p.useMemo)(()=>{if(v&&m){var e,t;return v&&m&&new O.Z(null!==(e=null==v?void 0:v.toString())&&void 0!==e?e:"0").minus(null!==(t=null==m?void 0:m.toString())&&void 0!==t?t:"0")}},[v,m]),b=(0,p.useMemo)(()=>f&&m?f.div(m.toString()).multipliedBy(36500).toFixed(2):"0.00",[f,m]);return{virtualPrice:v,baseAPR:b,rRate:i,balances:a,ethxTotalSupply:s,ethxPrice:x}};var B=n(968);let V=(0,v.zo)("div",{width:"100%",height:"100%",display:"flex",flexDirection:"column"}),G=(0,v.zo)("div",{display:"flex",flexDirection:"column",width:"100%",padding:20,gap:20,"& .title_info":{display:"flex",alignItems:"center",justifyContent:"space-between"},"& .icon_name":{display:"flex",alignItems:"center",gap:10},"& .icon":{},"& .name":{fontWeight:500,fontSize:22,lineHeight:"27px"},"& .earn":{fontSize:18,lineHeight:"22px"},"& .infos":{padding:20,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(3px)",display:"flex",justifyContent:"space-between"},"& .title":{fontWeight:600,fontSize:16,lineHeight:"20px",color:"#A090FF"},"& .value":{marginTop:10,fontSize:16,lineHeight:"20px"}}),P=(0,v.zo)("div",{display:"flex",flexDirection:"column",width:"100%",padding:20,gap:20,height:200,"& .balance":{fontSize:16,lineHeight:"19px"},"& .earned":{flex:1,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,lineHeight:"19px"}}),U=(0,v.zo)("div",{height:50,padding:"10px 20px",fontSize:16,display:"flex",alignItems:"center",background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(3px)","& input":{outline:"none",border:"none",flex:1,color:"White",fontSize:16,height:"100%",lineHeight:"30px",whiteSpace:"nowrap",background:"transparent"},"& .symbol":{lineHeight:"30px",padding:"0 10px"},"& .maxbtn":{cursor:"pointer",fontWeight:500,lineHeight:"18px",padding:"6px 10px",background:"White",color:"Black"}}),Q=(0,v.zo)("div",{display:"flex",border:"1px solid $primary",height:52}),X=e=>"UNI-V2"===e?(0,i.jsx)("img",{className:"icon",src:"/icons/lsd_eth_uni_v2_lp.png",alt:"lp",width:"auto",height:32}):(0,i.jsx)("img",{className:"icon",src:"/icons/".concat(e.toLowerCase(),".png"),width:32,height:32,alt:"icon"});function Y(e){var t;let{pool:n,addressInfoOfPool:d}=e,{ethPrice:u,lsdPrice:y,lpPrice:m}=(0,p.useContext)(B.g),{data:c}=(0,o.mx)(),{ethxPrice:v}=H(),[g,w]=(0,p.useState)("Stake"),_=!!(null==n?void 0:null===(t=n.tokenSymbol)||void 0===t?void 0:t.includes("UNI")),T=_?m:(null==n?void 0:n.tokenSymbol.includes("ETHx"))?new O.Z(null!=v?v:"1").multipliedBy(u).div(1e18).toFixed(2):u,S=(0,o.cq)({address:n.tokenAddress,abi:R.em,signerOrProvider:c}),M=(0,p.useMemo)(()=>{if((null==d?void 0:d.periodFinish)<q()().unix())return"0.00";let e=T;n.tokenSymbol.includes("UNI")&&(e=m);let t=new O.Z(null==d?void 0:d.rewardRate).multipliedBy(31536e3).multipliedBy(y),i=new O.Z(null==d?void 0:d.totalSupply).multipliedBy(e);return i.eq(0)?"0.00":t.div(i).multipliedBy(100).toFixed(2)},[d,n,u]),j=async()=>{var e;let t=(0,l.Qt)(J.get("stake"));t.eq(0)||await (null==N?void 0:null===(e=N.estimateGas)||void 0===e?void 0:e.stake(t,{value:"ETH"===n.tokenSymbol?t:0}).then(async e=>{var i;console.log("estimated: before",null==e?void 0:e.toString()),console.log("estimated after",null===(i=D(e))||void 0===i?void 0:i.toString());let a=await (null==N?void 0:N.stake(t,{value:"ETH"===n.tokenSymbol?t:0}).catch(e=>{console.error("deposit: ",e)}));console.log(a)}).catch(e=>console.error("estimate: ",e)))},k=async()=>{if(!N)return;let e=(0,l.Qt)(J.get("withdraw"));e.eq(0)||await N.estimateGas.withdraw(e).then(async t=>{var n;console.log("estimated: before",t.toString()),console.log("estimated after",null===(n=D(t))||void 0===n?void 0:n.toString());let i=await N.withdraw(e).catch(e=>{console.error("withdraw: ",e)});console.log(i)}).catch(e=>console.error("estimate: ",e))},A=async()=>{S&&await S.estimateGas.approve(n.poolAddress,x.Bz).then(async()=>{let e=await S.approve(n.poolAddress,x.Bz);await e.wait(),Z(!1)}).catch(e=>console.error("estimate: ",e))},N=(0,o.cq)({address:null==n?void 0:n.poolAddress,abi:s.H,signerOrProvider:c}),z=async()=>{N&&await N.estimateGas.getReward().then(async e=>{console.log("estimated: before",e.toString()),console.log("estimated after",D(e).toString());let t=await N.getReward().catch(e=>{console.error("getReward: ",e)});console.log(t)}).catch(e=>console.error("getReward: ",e))},[C,{height:L}]=(0,r.h4)(),I=(L-10)*Math.tan(30*Math.PI/180),F=I+10,[W,{width:$}]=(0,r.h4)(),[E,Z]=(0,p.useState)(!0),[Y,K]=(0,p.useState)(!1),[J,ee]=(0,r.Sx)([["stake",""],["withdraw",""]]),et=async()=>{K(!0),"Stake"===g?E&&"ETH"!==n.tokenSymbol?await A():await j():"Withdraw"==g?await k():await z(),K(!1)},en=e=>{let t=g==e;return(0,i.jsxs)("div",{style:{flex:1,flexShrink:0,display:"flex",height:"100%",position:"relative",left:-I*("Stake"==e?0:"Withdraw"==e?1:2),cursor:"pointer"},onClick:()=>w(e),children:["Stake"!==e&&(0,i.jsx)("div",{style:{width:F,maxWidth:F,height:"100%",flexShrink:0,zIndex:-1,transform:"Withdraw"===e?"skewX(".concat(30,"deg)"):"skewX(-".concat(30,"deg)"),position:"relative",left:F/2,background:t?"var(--colors-primary)":"none",borderLeft:"1px solid var(--colors-primary)"}}),(0,i.jsx)("div",{style:{flex:1,overflow:"hidden",height:"100%",fontWeight:600,lineHeight:"50px",fontSize:22,background:t?"var(--colors-primary)":"transparent",textAlign:"center",color:t?"black":"white"},children:e}),"Claim"!==e&&(0,i.jsx)("div",{style:{width:F,height:"100%",flexShrink:0,zIndex:-1,position:"relative",left:-F/2,transform:"Withdraw"===e?"skewX(-".concat(30,"deg)"):"skewX(".concat(30,"deg)"),background:t?"var(--colors-primary)":"none",borderRight:"1px solid var(--colors-primary)"}})]})};return(0,i.jsx)(b.im,{ref:W,children:(0,i.jsxs)(V,{children:[(0,i.jsxs)(G,{children:[(0,i.jsxs)("div",{className:"title_info",children:[(0,i.jsxs)("div",{className:"icon_name",children:[X(null==n?void 0:n.tokenSymbol),(0,a.fj)(null==n?void 0:n.tokenSymbol)]}),(0,i.jsx)("div",{className:"earn",children:"Earn $eSLSD"})]}),(0,i.jsxs)("div",{className:"infos",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"title",children:"TVL"}),(0,i.jsx)("div",{className:"value",children:(0,a.dq)(null==d?void 0:d.totalSupply)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"title",children:"APR"}),(0,i.jsxs)("div",{className:"value",children:[M,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"title",children:"Earned"}),(0,i.jsxs)("div",{className:"value",children:[(0,a.dq)(null==d?void 0:d.earned)," $eSLSD"]})]})]})]}),(0,i.jsxs)(Q,{ref:C,style:{width:$+2*I},children:[en("Stake"),en("Withdraw"),en("Claim")]}),(0,i.jsxs)(P,{children:["Stake"==g&&(0,i.jsxs)("div",{className:"balance",children:["Balandce: ",(0,a.dq)(null==d?void 0:d.tokenBalance)]}),"Withdraw"==g&&(0,i.jsxs)("div",{className:"balance",children:["Staked: ",(0,a.dq)(null==d?void 0:d.balanceOf)]}),"Claim"==g&&(0,i.jsxs)("div",{className:"earned",children:["Earned: ",(0,a.dq)(null==d?void 0:d.earned)]}),"Claim"!==g&&(0,i.jsxs)(U,{children:["Stake"===g&&(0,i.jsx)("input",{value:J.get("stake"),onChange:e=>{ee.set("stake",e.target.value);let t=(0,l.Qt)(e.target.value);console.info("allow:",null==d?void 0:d.tokenAllowance),Z(t.lte(0)||t.gt((null==d?void 0:d.tokenAllowance)||0))}}),"Withdraw"===g&&(0,i.jsx)("input",{value:J.get("withdraw"),onChange:e=>ee.set("withdraw",e.target.value)}),(0,i.jsx)("div",{className:"symbol",children:n.tokenSymbol}),(0,i.jsx)("div",{className:"maxbtn",onClick:()=>{"Stake"==g?ee.set("stake",h.formatEther((null==d?void 0:d.tokenBalance)||"0")):ee.set("withdraw",h.formatEther((null==d?void 0:d.balanceOf)||"0"))},children:"Max"})]}),(0,i.jsx)(f.z,{loading:Y,onClick:et,style:{width:"100%"},children:"Stake"==g&&E&&"ETH"!==n.tokenSymbol?"Approve":g})]})]})})}let K=(0,v.zo)("div",{marginTop:60}),J=(0,v.zo)("div",{marginTop:32,gap:24,rowGap:32,display:"flex",flexWrap:"wrap",justifyContent:"center"});function ee(){let{pools:e,addressInfoOfPools:t}=(0,p.useContext)(B.g);return(0,i.jsxs)(K,{className:"farms",children:[(0,i.jsx)(b.Dx,{children:"Farm"}),(0,i.jsx)(J,{children:e&&t&&(0,i.jsx)(i.Fragment,{children:e.map((e,n)=>(0,i.jsx)(Y,{pool:e,addressInfoOfPool:t[n]},"farm_"+n))})})]})}(0,v.zo)("svg",{fill:"$title",width:17,height:16,viewBox:"0 0 17 16",xmlns:"http://www.w3.org/2000/svg"});let et=(0,v.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center",gap:10,textAlign:"center","@md":{gap:20}}),en=(0,v.zo)("div",{color:"$title",fontWeight:700,fontSize:36}),ei=(0,v.zo)("div",{color:"$title",fontSize:18});function ea(e){return(0,i.jsxs)(et,{style:e.style,children:[(0,i.jsx)(ei,{children:e.title}),(0,i.jsx)(en,{children:e.value})]})}let es=(0,v.zo)("div",{marginTop:72});function ed(){var e,t;let n=(0,y.q)(),{data:s,isError:d,isLoading:l}=(0,o.KQ)({address:n.treasury,token:n.tokenAddress}),{data:u}=(0,o.dQ)({address:n.tokenAddress,chainId:n.chainId}),{addressInfoOfPools:r,lsdPrice:m,pools:c,poolLsdBalanceOfs:v,ethAmountInLP:x}=(0,p.useContext)(B.g),h=r&&c&&r.reduce((e,t,n)=>{var i,a,s;return(null===(i=c[n])||void 0===i?void 0:null===(a=i.tokenSymbol)||void 0===a?void 0:a.includes("UNI"))?e:new O.Z(null!=e?e:"0").plus(null!==(s=null==t?void 0:t.totalSupply)&&void 0!==s?s:"0").toString()},0),f=new O.Z(null!=h?h:"0").plus(null!=x?x:"0").toFixed(),g=(0,p.useMemo)(()=>{if(!v)return;let e=new O.Z(0);for(let t=0;t<(null==v?void 0:v.length);t++)e=e.plus(new O.Z(v[t]));return e.toFixed()},[v]),w=new O.Z(49225e3*1e18).minus(null!=g?g:"0").toFixed(),_=new O.Z(m).multipliedBy(w).div(1e18).toFormat(2),T=[{value:"$"+_,title:"$SLSD Price",src:"/images/coin.png"},{value:"$2,232,223",title:"$SLSD Circulation Supply",src:"/images/data.png"},{value:(0,a.dq)(f,18,2)+" ETH",title:"TVL",src:"/images/cash.png"},{value:(0,a.dq)(new O.Z(null!==(t=null==s?void 0:null===(e=s.value)||void 0===e?void 0:e.toString())&&void 0!==t?t:"0"),18,0)+" $SLSD",title:"Treasury",src:"/images/coins.png"}];return(0,i.jsxs)(es,{className:"statistics",children:[(0,i.jsx)(b.Dx,{children:"Stats"}),(0,i.jsx)(b.Zt,{children:T.map((e,t)=>(0,i.jsx)(ea,{value:e.value,title:e.title},t))})]})}(0,v.zo)("a",{display:"flex",width:36,height:36,alignItems:"center",justifyContent:"center",cursor:"pointer",color:"$title",background:"rgba(0, 0, 0, 0.05)",backdropFilter:"blur(4px)",borderRadius:6});let el=(0,v.zo)("section",{paddingBottom:240,paddingTop:120,margin:"0 auto",zIndex:1,position:"relative",paddingLeft:32,paddingRight:32,maxWidth:1440});function eu(){return(0,i.jsxs)(el,{style:{position:"relative",zIndex:100},children:[(0,i.jsx)(ed,{}),(0,i.jsx)(ee,{}),(0,i.jsx)(C,{})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4754)}),_N_E=e.O()}]);